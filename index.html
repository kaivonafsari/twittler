<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css"/>
    
    <script src="jquery.js"></script>
    <script src="jquery.timeago.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Bevan' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="nav">
      <div class="container">
        <ul class="pull-left nav nav-pills">
          <li class="active"><a href="#">Log In</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">What's New</a></li>
        </ul>
      </div>
    </div>

    <div class="jumbotron">
      <div class="container">
        <h1>Twittler</h1>
        <p>Because what's a Twitter?</p>
      </div>
    </div>

    <div class="learn-more">
      <div class="container">
        <div class="row">
          <div class="span6">
            <h3>Connect</h3>
            <p>Speak with your boyfriend from 3000 miles away, or post your famous fried chicken recipe to the world!</p>
            <p><a href="#">Do More...</a></p>
          </div>
          <div class="span6">
            <h3>Have Fun</h3>
            <p>Meet new friends, loves, and connect with lively social groups!</p>
            <p><a href="#">Discover it...</a></p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="feed">
      <div class="container">
        <div class="inside">
          <button type="button" class="btn btn-primary btn-lg">More!</button>
      <script>

      $(document).ready(function(){
        

        var index = streams.home.length - 1;
        var ntweets = function(newTweet){
          var batman = newTweet;
          var $tweet = $('<div class="tweet"></div>');
          $tweet.data("user", batman.user)
          $tweet.append('<a href="#" class='+ batman.user+'>' + '@'+batman.user+'</a>');
          $tweet.append('<p>' + batman.message + '</p>' + ' ' +jQuery.timeago(batman.created_at))
          $tweet.appendTo('.inside');
          
        };

        while(index >= 0){
          var tweet = streams.home[index];
          ntweets(tweet);
          index -= 1;
        }

        $('.inside').on('click', 'a', function(){
          event.preventDefault();
          var user = $(this).closest(".tweet").data('user');
          $('.inside div').remove();
          var index = streams.users[user].length -1


          while (index >=0) {
            var tweet = streams.users[user][index]
            ntweets(tweet);
            index -= 1;
          }

          
        });

        $('button').on('click', function(){
          $('.inside div').remove();
          var index = streams.home.length-1
          
          while(index >= 0){
            var tweet = streams.home[index];
            ntweets(tweet);
            index -= 1;
        }
        });


        $('.tweet').on('click', function(){
          $(this).fadeOut();
        });
        
      });

    </script>
        </div>
      </div>
    </div>
  </body>
</html>
